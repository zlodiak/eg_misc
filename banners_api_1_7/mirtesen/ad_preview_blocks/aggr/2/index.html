<!DOCTYPE html>

<html>
    <head>
        <title>aggr2</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="//static.smi2.net/static/jsapi/jsapi.v1.7.4.ru_RU.js"></script>

        <style>
@font-face {
                font-family: 'pt_sans_regular';
                src: url(//static.smi2.net/static/blocks/fonts/pt_sans/from_google/PT_Sans-Web-Regular.ttf); 
            }

            @font-face {
                font-family: 'pt_sans_bold';
                src: url(//static.smi2.net/static/blocks/fonts/pt_sans/from_google/PT_Sans-Web-Bold.ttf); 
            }

            #container-84777 {
                background: #fff;
                border-radius: 5px;

                font-family:'pt_sans_regular', arial, sans-serif;
                color: #000;       
                text-decoration: none;  
            }

            #container-84777 #header-84777 {
                padding: 24px 29px 15px;
                border-bottom: 1px solid #eee;

                font-size: 18px;  
                font-family:'pt_sans_regular', arial, sans-serif;         
            }

            #container-84777 .list-container-item:hover .title-84777{
                color: #1280c0;
            }
            
            #container-84777 .list-container-item:hover {
                /*background: #f2f2f2;
                transition: 0.6s;*/
            }

            #container-84777 .list-container-item {
                border-bottom: 1px solid #eee;                
                transition: 0.6s;
            }

                #container-84777 .item-wrapper-84777{
                    padding: 14px 28px 16px;
                    overflow:hidden;
                    display: block;

                    font-family:'pt_sans_regular', arial, sans-serif;
                    color: #000;       
                    text-decoration: none;             
                }

                    #container-84777 .item-inner-wrapper-84777{
                        overflow: hidden;
                    }                       

                        #container-84777 .title-84777 {
                            display: block;
                            margin-bottom: 7px;

                            text-decoration: none;
                            font-size: 16px;
                            line-height: 22px;
                            font-weight: normal;
                            font-family:'pt_sans_bold', arial, sans-serif;
                        }

                        #container-84777 .domain-wrapper-84777{
                            float: left;
                            width: 49%;
                        }

                            #container-84777 .image-84777 {
                                display: block;
                                float: left;
                                margin-top: 5px;
                                margin-right: 7px;
                                border: none;
                                width: 16px;
                                height: 16px;
                            }                     

                            #container-84777 .domain-84777 {
                                display: inline-block;
                                margin-right: 0px;
                                margin-top: 3px;

                                text-decoration: none;
                                font-size: 14px;
                                color: #c5bdbd;
                            }                   

                        #container-84777 .social-84777{
                            float: right;
                            width: 51%;
                            overflow: hidden;
                            padding-top: 3px;
                        }

                            #container-84777 .social-84777 > div{
                                cursor: pointer;
                                display: inline-block;
                                padding-left: 21px;
                                float: right;                                

                                font-size: 14px;
                                color: #a1a1a1;
                                line-height: 16px;
                                font-family: 'pt_sans_regular', sans-serif;                            
                            }

                            #container-84777 .votes-84777{
                                background: url('//static.smi2.net/srcimg/2856449.png') left 2px no-repeat;
                                padding-left: 22px;
                                margin-left: 20px;
                            }

                            #container-84777 .comments-84777{
                                background: url('//static.smi2.net/srcimg/2856554.png') left 2px no-repeat;
                                padding-left: 19px;
                                margin-left: 20px;
                            }

                            #container-84777 .shares-84777{
                                background: url('//static.smi2.net/srcimg/2856555.png') left 3px no-repeat;
                                padding-left: 22px;
                                margin-left: 0;
                            }                                                        
        </style>
    </head>
    <body style="max-width: 400px; background: #eee; margin: 10px auto;">
        <div id="container-84777">
            <div id="header-84777">Популярное на МирТесен</div>
        </div>

        <script type="text/javascript">
            JsAPI.Ui.ListBlock({
                'page_size': 30,
                'max_page_count': Infinity,
                'parent_element': JsAPI.Dom.getElement("container-84777"),
                'item_content_renderer': function (parent, model, index) {
                    var sharesCnt = parseInt(model['shares'], 10),
                        commentsCnt = parseInt(model['comments'], 10),
                        votesCnt = parseInt(model['votes'], 10);

                    JsAPI.Dom.appendChild(parent, JsAPI.Dom.createDom('a', {
                        'class': 'item-wrapper-84777',
                        'href': model['url'],
                        'target': '_blank'
                    }, [
                        JsAPI.Dom.createDom('div', {
                            'class': 'item-inner-wrapper-84777'
                        },
                        JsAPI.Dom.createDom('div', undefined, [                            
                            JsAPI.Dom.createDom('div', 'title-84777', model['title']),                                    
                            JsAPI.Dom.createDom('div', 'domain-wrapper-84777', 
                                JsAPI.Dom.createDom('img', {
                                    'class': 'image-84777',
                                    'src': model['image']
                                }),                                 
                                JsAPI.Dom.createDom('div', {
                                    'class': 'domain-84777'
                                }, model['domain'])
                            ),                         
                            JsAPI.Dom.createDom('div', 'social-84777', [
                                (votesCnt > 0) ? JsAPI.Dom.createDom('div', 'votes-84777', '' + model['votes']) : '',                        
                                (commentsCnt > 0) ? JsAPI.Dom.createDom('div', 'comments-84777', '' + model['comments']) : '',
                                (sharesCnt > 0) ? JsAPI.Dom.createDom('div', 'shares-84777', '' + model['shares']) : ''
                            ])
                        ])),
                        JsAPI.Dom.createDom('div', 'clear')
                    ]));
                },
                'block_id': 84777,
                'fields': JsAPI.Dao.NewsField.TITLE 
                    | JsAPI.Dao.NewsField.IMAGE
                    | JsAPI.Dao.NewsField.DOMAIN
                    | JsAPI.Dao.NewsField.SHARES
                    | JsAPI.Dao.NewsField.VOTES
                    | JsAPI.Dao.NewsField.COMMENTS
            }, function (block) {
            }, function (reason) {
                /*alert('Error: ' + reason);*/
            });
        </script>
    </body>
</html>
